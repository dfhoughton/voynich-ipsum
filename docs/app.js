"use strict";(()=>{var je=Object.create;var de=Object.defineProperty;var Ne=Object.getOwnPropertyDescriptor;var $e=Object.getOwnPropertyNames;var Ee=Object.getPrototypeOf,Ie=Object.prototype.hasOwnProperty;var E=(a,e)=>()=>(e||a((e={exports:{}}).exports,e),e.exports);var He=(a,e,i,s)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of $e(e))!Ie.call(a,t)&&t!==i&&de(a,t,{get:()=>e[t],enumerable:!(s=Ne(e,t))||s.enumerable});return a};var Re=(a,e,i)=>(i=a!=null?je(Ee(a)):{},He(e||!a||!a.__esModule?de(i,"default",{value:a,enumerable:!0}):i,a));var F=E((exports,module)=>{"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.rando=exports.pickMeToo=exports.pickMe=void 0;function pickMe(a,e){let i=e??(()=>Math.random());return pickMeToo(a)(i)}exports.pickMe=pickMe;function pickMeToo(a){let e=simplePicker(a);if(e)return e;if(a=sanitize(a),a.length===0)throw new Error(`nothing to select in ${a}`);if(a.length===1){let[r]=a[0];return l=>()=>r}dupChecker(a,r=>r[0]);let i=0,s=0;for(let[,r]of a)i+=r;for(let r=0;r<a.length;r++){let[,l]=a[r];s+=l,a[r][1]=s/i}let t=[],o=[];for(let[r,l]of a)t.push(r),o.push(l);let n=thresholder(o);return r=>()=>t[n(r())]}exports.pickMeToo=pickMeToo;function dupChecker(a,e){for(let i=0,s=a.length-1;i<s;i++){let t=e(a[i]);for(let o=i+1;o<a.length;o++)if(t===e(a[o]))throw new Error(`${t} appears more than once among frequencies`)}}function simplePicker(a){if(a.length!==0)if(a.every(e=>Array.isArray(e)&&e.length===2&&typeof e[1]=="number")){let e=a,[,i]=e[0];if(i>0&&e.every(([,s])=>s===i)){let s=e.map(([t])=>t);return dupChecker(s,t=>t),t=>()=>s[Math.floor(s.length*t())]}}else{let e=[...a];if(e.length===1){let i=e[0];return s=>()=>i}return dupChecker(e,i=>i),i=>()=>e[Math.floor(e.length*i())]}}function sanitize(a){return a.map(([e,i])=>[e,Number(i)]).filter(([,e])=>Number.isFinite(e)&&e>0)}function thresholder(thresholds){return eval(`(n) => ${portion(thresholds,0,thresholds.length)}`)}function portion(a,e,i){let s=i-e;if(s===1)return e.toString();let t=e+(s%2===0?s/2-1:(s-1)/2);return`(n > ${a[t]} ? ${portion(a,t+1,i)} : ${portion(a,e,t+1)})`}function rando(a){return e=>{e!==void 0&&(a=e);let i=a+=1831565813;return i=Math.imul(i^i>>>15,i|1),i^=i+Math.imul(i^i>>>7,i|61),((i^i>>>14)>>>0)/4294967296}}exports.rando=rando});var B=E(d=>{"use strict";Object.defineProperty(d,"__esModule",{value:!0});d.titleize=d.capitalize=d.shuffle=d.uniqBy=d.subsets=d.combinations=d.compact=d.simpleClone=d.assertNever=d.pickN=d.dupParams=d.Hmm=void 0;var ee=class{constructor(e){this.rng=e}n(){return this.rng()}maybe(e=.5){return this.rng()<=e}fromRange(e,i){if(e===i)return e;if(e>i)throw new Error(`low (${e}) should be less than or equal to high (${i})`);return e+(i-e)*this.n()}};d.Hmm=ee;function ie(a){if(Array.isArray(a))return a.map(e=>ie(e));if(typeof a=="object"){let e={};for(let[i,s]of Object.entries(a))e[i]=ie(s);return e}return a}d.dupParams=ie;function Fe(a,e){let i=new Set;for(;i.size<a;)i.add(e());return Array.from(i)}d.pickN=Fe;function Be(a){throw console.error(a),new Error("Unexpected object: "+a)}d.assertNever=Be;function te(a){switch(typeof a){case"undefined":case"number":case"boolean":return a;case"string":return""+a;default:if(a===null)return a;if(Array.isArray(a))return a.map(i=>te(i));let e={};for(let[i,s]of Object.entries(a))e[i]=te(s);return e}}d.simpleClone=te;function Le(a){let e=[];for(let i of a)i!=null&&e.push(i);return e}d.compact=Le;function ge(a){if(a.length===1)return a[0].map(o=>[o]);let[e,...i]=a,s=[],t=ge(i);for(let o of e)for(let n of t)s.push([o].concat(n));return s}d.combinations=ge;function ve(a){if(a.length===0)return[];let[e,...i]=a,s=[],t=ve(i);s.push([e]);for(let o of t)s.push(o),s.push([e,...o]);return s}d.subsets=ve;function Ue(a,e){let i=new Set,s=[];for(let t of a){let o=e(t);i.has(o)||(i.add(o),s.push(t))}return s}d.uniqBy=Ue;function We(a,e){let i=a.length,s;for(;i!=0;)s=Math.floor(e()*i),i--,[a[i],a[s]]=[a[s],a[i]];return a}d.shuffle=We;function ye(a){return a.charAt(0).toUpperCase()+a.slice(1)}d.capitalize=ye;function De(a){return a.split(/(\s+)/).map(e=>ye(e)).join("")}d.titleize=De});var be=E(U=>{"use strict";Object.defineProperty(U,"__esModule",{value:!0});U.MorphologyEngine=void 0;var k=F(),I=B(),Qe=(0,k.pickMeToo)([["prefix",3],["suffix",10],["both",1]]),Ge=(0,k.pickMeToo)([["simple",2],["moderate",4],["complex",1]]),se=class{constructor(e,i={},s=()=>Math.random()){var t,o,n;this.morphology=i,this.phonologyEngine=e,this.phonology=e.config(),this.rng=s,this.closedClassStems=new Set;let r=new I.Hmm(s);(t=i.analytic)!==null&&t!==void 0||(i.analytic=r.maybe(.4)),i.analytic?(i.verbalInflections=!1,i.nominalInflections=!1):((o=i.verbalInflections)!==null&&o!==void 0||(i.verbalInflections=r.maybe(.9)),(n=i.nominalInflections)!==null&&n!==void 0||(i.nominalInflections=!i.verbalInflections||r.maybe(.3))),i.derivationalAdfixes=!i.analytic||r.maybe(.5),this.initializeAdfixMaker(),this.initializeStemmer(),this.initializeVerbs(r),this.initializeNominals(r),this.initializeAdverbs(r),this.particle=this.makeParticles(r.fromRange(10,100),!1)}initializeAdverbs(e){let i=e.fromRange(10,50),s=e.fromRange(.1,.5),t=[];for(;t.length<i;){let r=this.stem();this.addClosedClassItem(r)&&t.push(r)}let o=t.map(r=>[r,e.n()]),n=(0,k.pickMe)(o,this.rng);this.adverb=()=>e.maybe(s)?n():this.stem()}addClosedClassItem(e){return this.closedClassStems.has(e)?!1:(this.closedClassStems.add(e),!0)}initializeNominals(e){let i=(0,k.pickMe)([[3,1],[4,10],[5,50],[6,100],[7,90],[8,80],[9,30],[10,10],[11,1]],this.rng)(),s=[];for(;s.length<i;){let l=this.stem();this.addClosedClassItem(l)&&s.push(l)}let t=s.map(l=>[l,e.n()]),o=this.makeInflector(e,!1),n=(0,k.pickMe)(t,this.rng);this.pronoun=()=>o(n());let r=this.makeInflectionalStem(e);this.nounStem=r,this.noun=l=>o(l??r())}makeInflector(e,i){if(this.morphology.analytic)return s=>s;if(i){let s=(0,k.pickMe)([[1,5],[2,3],[3,2],[4,1]],this.rng)();s===1&&this.morphology.adfixStyle==="both"&&(s=2);let t=[];for(let r=0;r<s;r++)t.push(this.makeParticles(e.fromRange(2,20),!0));let o=0;switch(this.morphology.adfixStyle){case"prefix":o=t.length;break;case"suffix":o=0;break;case"both":o=Math.round(e.fromRange(1,s-1));break;default:(0,I.assertNever)(this.morphology.adfixStyle)}let n=t.length+1;return r=>{let l="";for(let h=0,u=0;h<n;h++)l+=h===o?r:t[u++]();return l}}else{let s=(0,k.pickMe)([[1,5],[2,3]],this.rng)(),t=[];for(let o=0;o<s;o++){let n=t.length==0?(0,k.pickMe)([[4,12],[5,11],[6,10],[7,9],[8,8],[9,7],[10,6],[11,4],[12,2],[13,1],[14,1]],this.rng)():(0,k.pickMe)([[1,5],[2,4],[3,2],[4,1]],this.rng)();t.push(this.makeParticles(n,!0))}if(t.length===2&&e.maybe(.5)){let[o,n]=t;t=[n,o]}switch(this.morphology.adfixStyle){case"prefix":{if(t.length===2){let[n,r]=t;return l=>n()+r()+l}let[o]=t;return n=>o()+n}case"suffix":{if(t.length===2){let[n,r]=t;return l=>l+n()+r()}let[o]=t;return n=>n+o()}case"both":{if(t.length===2){let[n,r]=t;return l=>n()+l+r()}let[o]=t;return n=>n+o()}default:(0,I.assertNever)(this.morphology.adfixStyle)}}}makeInflectionalStem(e){let i=e.fromRange(10,100),s=[];for(;s.length<i;){let l=this.stem();this.addClosedClassItem(l)&&s.push(l)}let t=s.map(l=>[l,e.n()]),o=(0,k.pickMe)(t,this.rng),n=this.nonClosedClassStem.bind(this);if(this.morphology.derivationalAdfixes){let l=[];for(let u=0;u<6;u++)l.push(this.makeDerivationalAdfixes(e));let h=(0,k.pickMe)([[0,50],[1,5],[2,2],[3,1]],this.rng);n=()=>{let u=h(),m=h();if(u===0&&m===0)return this.nonClosedClassStem();let p="";if(u>0){let w=(0,I.shuffle)([0,1,2],this.rng).slice(0,u);w.sort();for(let V of w)p+=l[V]()}let C="";if(m>0){let w=(0,I.shuffle)([3,4,5],this.rng).slice(0,m);w.sort();for(let V of w)C+=l[V]()}return p+this.nonClosedClassStem()+C}}let r=e.fromRange(.2,.35);return()=>e.maybe(r)?o():n()}initializeAdfixMaker(){var e,i,s;(e=(s=this.morphology).adfixStyle)!==null&&e!==void 0||(s.adfixStyle=Qe(this.rng)());let t=(i=this.phonology.numberPossibleSyllables)!==null&&i!==void 0?i:0,o=t<100?[[1,4],[2,3],[3,2],[4,1]]:t<1e3?[[1,5],[2,2],[3,1]]:[[1,5],[2,1]],n=(0,k.pickMe)(o,this.rng);this.adfixMaker=()=>{let r="";for(let l=0;l<1e3;l++){r="";for(let h=0,u=n();h<u;h++)r+=this.phonologyEngine.syllable();if(this.addClosedClassItem(r))return r}return r}}nonClosedClassStem(){let e=this.stem();for(;this.closedClassStems.has(e);)e=this.stem();return e}initializeStemmer(){var e,i;(e=(i=this.morphology).stemComplexity)!==null&&e!==void 0||(i.stemComplexity=Ge(this.rng)());let s;switch(this.morphology.stemComplexity){case"simple":s=(0,k.pickMe)([[1,10],[2,1]],this.rng);break;case"moderate":s=(0,k.pickMe)([[1,10],[2,5],[3,1]],this.rng);break;case"complex":s=(0,k.pickMe)([[1,10],[2,10],[3,5],[4,2],[5,1]],this.rng);break;default:(0,I.assertNever)(this.morphology.stemComplexity)}this.stem=()=>{let t="";for(let o=0,n=s();o<n;o++)t+=this.phonologyEngine.syllable();return t}}initializeVerbs(e){let i=this.makeInflectionalStem(e);this.verbStem=i;let s=this.makeInflector(e,!0);this.verb=t=>s(t??i())}simpleSyllable(){var e;if(this.phonology.closedSyllables||!((e=this.phonology.consonantClusters)===null||e===void 0)&&e.initial){let i=[];for(let s=0;s<4;s++)i.push(this.phonologyEngine.syllable());return i.sort((s,t)=>s.length-t.length),i[0]}else return this.phonologyEngine.syllable()}config(){return this.morphology}makeDerivationalAdfixes(e){let i=this.initializeAdfixMaker(),s=[];for(let t=0,o=e.fromRange(10,15);t<o;t++)s.push([this.adfixMaker(),e.n()]);return(0,k.pickMe)((0,I.uniqBy)(s,([t])=>t),this.rng)}makeParticles(e,i){let s=new Set,t=[],o=0;for(;t.length<e&&o<1e3;){let r=this.simpleSyllable();s.has(r)||(s.add(r),t.push(r)),o++}let n=t.map(r=>[r,this.rng()]);return i&&n.push(["",this.rng()*2]),(0,k.pickMe)(n,this.rng)}};U.MorphologyEngine=se});var Ce=E(W=>{"use strict";Object.defineProperty(W,"__esModule",{value:!0});W.PhonologyEngine=void 0;var P=F(),_=B(),ne=class{constructor(e={},i=()=>Math.random()){this.phonology=e;let s=new _.Hmm(i),[t,o]=ti(e,i,s),[n,r,l,h]=li(e,i,s);e.numberPossibleSyllables=l*o*h,this.syllableGenerator=()=>n()+t()+r()}config(){return this.phonology}syllable(){return this.syllableGenerator()}};W.PhonologyEngine=ne;var Je=(0,P.pickMeToo)([["minimal",1],["simple",5],["canonical",100],["complex",30]]),Ke=(0,P.pickMeToo)([["a",20],["o",2],["e",2],["u",1],["i",1]]),Xe=(0,P.pickMeToo)([[["a","i","u"],10],[["a","e","i","u"],1],[["a","o","i","u"],1]]),Ye=(0,P.pickMeToo)([[6,1],[7,2],[8,3],[9,4],[10,5],[11,6],[12,7],[13,8],[14,9],[15,10],[16,11],[17,11]]),Ze=(0,P.pickMeToo)([["a",1e3],["ai",100],["au",100],["e",1e3],["eu",90],["eo",10],["i",1e3],["iu",100],["o",1e3],["oi",100],["ou",100],["u",1e3],["ui",100],["uo",100],["ue",100],["y",500],["yi",50],["y\xF8",50],["\xF6",500],["\xF6y",50],["\xF6i",50],["\xEB",500],["\xEBi",50],["\xEBu",50],["\xE4",300],["\xE4i",30],["\xE4u",30]]),ei=(0,P.pickMeToo)([[1,15],[2,10],[3,4],[4,3],[5,2],[6,2],[7,1]]),Me=[["m",10],["n",10],["v",1],["f",.5],["z",1],["s",.5],["h",.25],["r",10],["l",10]],ii=(0,P.pickMeToo)(Me),ke=new Set(Me.map(([a])=>a));function ti(a,e,i){var s,t,o;let n=(s=a.vowels)!==null&&s!==void 0?s:{};if(a.vowels=n,!n.vocalicSyllableNuclei){(t=n.vowelComplexity)!==null&&t!==void 0||(n.vowelComplexity=Je(e)());let m=[];switch(n.vowelComplexity){case"minimal":m.push(Ke(e)());break;case"simple":m.push(...Xe(e)());break;case"canonical":m=["a","e","i","o","u"];break;case"complex":m.push(...(0,_.pickN)(Ye(e)(),Ze(e)));break;default:(0,_.assertNever)(n.vowelComplexity)}n.vocalicSyllableNuclei=m}!n.nonVocalicSyllableNuclei&&i.maybe(.02)?n.nonVocalicSyllableNuclei=(0,_.pickN)(ei(e)(),ii(e)):n.nonVocalicSyllableNuclei=[];let r=n.vocalicSyllableNuclei.map(m=>[m,e()*3]).concat(n.nonVocalicSyllableNuclei.map(m=>[m,e()]));(o=n.longVowels)!==null&&o!==void 0||(n.longVowels=i.maybe(.3));let l=(0,P.pickMe)(r,e),h,u=r.length;if(n.longVowels){let m=i.fromRange(.05,.5);if(n.nonVocalicSyllableNuclei.length){for(let[p]of r)p.length===1&&!ke.has(p)&&u++;h=()=>{let p=l();return p.length==2||ke.has(p)||e()>m?p:p+p}}else{for(let[p]of r)p.length===1&&u++;h=()=>{let p=l();return p.length==2||e()>m?p:p+p}}}else h=l;return[h,r.length]}var si=(0,P.pickMeToo)([["labial",1500],["dental",600],["aveolar",2e3],["palatal",500],["velar",1500],["uvular",300],["glottal",1e3]]),ni=(0,P.pickMeToo)([[2,10],[3,150],[4,200],[5,50],[6,3],[7,1]]),oi={labial:{stops:{voiced:["b"],unvoiced:["p"]},fricatives:{voiced:["v"],unvoiced:["f"]},affricates:{voiced:["bv"],unvoiced:["pf"]},nasals:["m"],approximant:["w"]},dental:{fricatives:{voiced:["\u03B8"],unvoiced:["dh"]},affricates:{voiced:["ddh"],unvoiced:["t\u03B8"]}},aveolar:{stops:{voiced:["d"],unvoiced:["t"],aspirated:["th"],ejective:["t'"]},fricatives:{voiced:["z"],unvoiced:["s","ll"]},affricates:{voiced:["dz"],unvoiced:["ts","tll"],ejective:["ts'","tll'"]},nasals:["n"],approximant:["r","l"]},palatal:{stops:{unvoiced:["c"],aspirated:["ch"],ejective:["c'"]},nasals:["\xF1"],approximant:["j"]},velar:{stops:{voiced:["g"],unvoiced:["k"],aspirated:["kh"],ejective:["k'"]},fricatives:{voiced:["x"],unvoiced:["gh"]},affricates:{voiced:["kx"],ejective:["kx'"]},nasals:["ng"]},uvular:{stops:{unvoiced:["q"]}},glottal:{stops:{unvoiced:["'"]},fricatives:{unvoiced:["h"]}}},ai=(0,P.pickMeToo)([["voiced",1500],["unvoiced",2e3],["aspirated",500],["ejective",50]]),ri=(0,P.pickMeToo)([[1,1],[2,100],[3,20],[4,2]]);function li(a,e,i){var s,t,o,n,r,l,h,u,m,p,C,w,V,O,R,v,z,j,N,J,K,X,Y,Z,re,le,ce,he;let c=(s=a.consonants)!==null&&s!==void 0?s:{};if(a.consonants=c,(c.placesOfArticulation===void 0||c.placesOfArticulation.length===0)&&(c.placesOfArticulation=(0,_.pickN)(ni(e)(),si(e))),c.voicingMechanisms===void 0||c.voicingMechanisms.length===0){let q=["unvoiced"],g=ri(e)();switch(g){case 2:case 3:q=(0,_.pickN)(g,ai(e));break;case 4:q=["voiced","unvoiced","aspirated","ejective"]}c.voicingMechanisms=q}(t=c.mayHaveFricatives)!==null&&t!==void 0||(c.mayHaveFricatives=i.maybe(.8)),(o=c.mayHaveAffricates)!==null&&o!==void 0||(c.mayHaveAffricates=i.maybe(.2)),(n=c.mayHaveNasals)!==null&&n!==void 0||(c.mayHaveNasals=i.maybe(.8)),(r=c.mayHaveApproximants)!==null&&r!==void 0||(c.mayHaveApproximants=i.maybe(.8));let ze=!c.stops;(l=c.stops)!==null&&l!==void 0||(c.stops=[]);let qe=!c.fricatives;(h=c.fricatives)!==null&&h!==void 0||(c.fricatives=[]);let Te=!c.affricates;(u=c.affricates)!==null&&u!==void 0||(c.affricates=[]);let Ae=!c.nasals;(m=c.nasals)!==null&&m!==void 0||(c.nasals=[]);let Oe=!c.approximants;(p=c.approximants)!==null&&p!==void 0||(c.approximants=[]);for(let q of c.placesOfArticulation){let g=oi[q];if(ze&&g.stops){let x=c.stops;for(let y of c.voicingMechanisms)for(let f=0,T=(w=(C=g.stops[y])===null||C===void 0?void 0:C.length)!==null&&w!==void 0?w:0;f<T;f++)f?i.maybe(1/2**f)&&x.push(g.stops[y][f]):x.push(g.stops[y][0])}if(c.mayHaveFricatives&&qe&&g.fricatives){let x=c.fricatives;for(let y of c.voicingMechanisms)for(let f=0,T=(O=(V=g.fricatives[y])===null||V===void 0?void 0:V.length)!==null&&O!==void 0?O:0;f<T;f++)f?i.maybe(1/2**f)&&x.push(g.fricatives[y][f]):x.push(g.fricatives[y][0])}if(c.mayHaveAffricates&&Te&&g.affricates){let x=c.affricates;for(let y of c.voicingMechanisms)for(let f=0,T=(v=(R=g.affricates[y])===null||R===void 0?void 0:R.length)!==null&&v!==void 0?v:0;f<T;f++)f?i.maybe(1/2**f)&&x.push(g.affricates[y][f]):x.push(g.affricates[y][0])}if(c.mayHaveNasals&&Ae&&g.nasals){let x=c.nasals;for(let y of c.voicingMechanisms)for(let f=0,T=(j=(z=g.nasals[y])===null||z===void 0?void 0:z.length)!==null&&j!==void 0?j:0;f<T;f++)f?i.maybe(1/2**f)&&x.push(g.nasals[y][f]):x.push(g.nasals[y][0])}if(c.mayHaveApproximants&&Oe&&g.approximants){let x=c.approximants;for(let y of c.voicingMechanisms)for(let f=0,T=(J=(N=g.approximants[y])===null||N===void 0?void 0:N.length)!==null&&J!==void 0?J:0;f<T;f++)f?i.maybe(1/2**f)&&x.push(g.approximants[y][f]):x.push(g.approximants[y][0])}}(K=a.closedSyllables)!==null&&K!==void 0||(a.closedSyllables=i.maybe(.8)),(X=a.consonantClusters)!==null&&X!==void 0||(a.consonantClusters={}),(Y=(re=a.consonantClusters).initial)!==null&&Y!==void 0||(re.initial=i.maybe(.6)),(Z=(le=a.consonantClusters).final)!==null&&Z!==void 0||(le.final=a.consonantClusters.initial?i.maybe(.8):i.maybe(.2));let ue=!!(c.fricatives.length||c.nasals.length||c.approximants.length);(ce=a.consonantClusters).initial&&(ce.initial=ue),(he=a.consonantClusters).final&&(he.final=ue&&a.closedSyllables);let ji=[],pe=c.stops.concat(c.nasals).concat(c.affricates).concat(c.fricatives).concat(c.approximants),M=[],$=[];a.consonantClusters.initial&&(c.fricatives.length&&(M=M.concat(A(i,c.fricatives,c.stops)),c.approximants.length&&(M=M.concat(A(i,c.fricatives,c.stops,c.approximants))),c.nasals.length&&(M=M.concat(A(i,c.fricatives,c.nasals))),c.affricates.length&&(M=M.concat(A(i,c.fricatives,c.affricates)))),c.approximants.length&&(M=M.concat(A(i,c.stops,c.approximants)),c.affricates.length&&(M=M.concat(A(i,c.affricates,c.approximants))))),a.consonantClusters.final&&(c.nasals.length&&($=$.concat(A(i,c.nasals,c.stops)),c.fricatives.length&&($=$.concat(A(i,c.nasals,c.stops,c.fricatives)))),c.approximants.length&&($=$.concat(A(i,c.approximants,c.stops))));let fe={simpleConsonants:(0,_.compact)(pe.map(q=>i.maybe(.95)?q:null)),clusters:M},me={simpleConsonants:(0,_.compact)(pe.map(q=>i.maybe(.95)?q:null)),clusters:$};return[xe(fe,i.fromRange(0,.3),i),xe(me,i.fromRange(.2,.9),i),Pe(fe),Pe(me)]}function A(a,...e){return(0,_.combinations)(e).map(i=>[i.join(""),a.n()])}function Pe(a){return a.simpleConsonants.length+a.clusters.length+1}function xe(a,e,i){if(a.simpleConsonants.length===0)return()=>"";let s=[],t=(0,_.uniqBy)(a.clusters,([p])=>p);for(let p of(0,_.uniqBy)(a.simpleConsonants,C=>C))s.push([p,i.n()]);let o=0;for(let[,p]of s)o+=p;if(t.length===0){if(e===0)return(0,P.pickMe)(s,i.rng);let p=o*e/(1-e);return s.push(["",p]),(0,P.pickMe)(s,i.rng)}let n=0;for(let[,p]of t)n+=p;let r=i.fromRange(0,.5),l=o*r/(n*(1-r));for(let p of t)p[1]*=l;let h=s.concat(t);if(e===0)return(0,P.pickMe)(h,i.rng);let u=0;for(let[,p]of h)u+=p;let m=u*e/(1-e);return h.push(["",m]),(0,P.pickMe)(h,i.rng)}});var we=E(D=>{"use strict";Object.defineProperty(D,"__esModule",{value:!0});D.SyntaxEngine=void 0;var b=F(),S=B(),oe=class{constructor(e,i={},s=()=>Math.random()){this.syntax=i,this.morphology=e,this.rng=s;let t=new S.Hmm(s);this.initializeWordOrder(),this.initializeAssertionParticlePosition(),this.initializeQuestionParticlePosition(),this.initializeAdpositionPosition(),this.initializeModifierPosition(),this.initializeNounModifier(t),this.initializeNounPhrase(t),this.initializeVerbPhrase(t),this.initializeAdverbials(t),this.initializeAdpositionPhrase(),this.initializeSententialParticlePositions(t),this.initializeAssertion(t),this.initializeQuestion()}initializeSententialParticlePositions(e){let i=e.fromRange(.01,.5),s=wi(this.rng),t=(0,b.pickMe)(["initial","final","beforeVerb","afterVerb"].map(n=>[n,this.rng()]),this.rng),o=()=>{let n={initial:0,final:0,beforeVerb:0,afterVerb:0};if(e.maybe(i)){let r=s();for(let l=0;l<r;l++)n[t()]++}return n};this.sententialParticlePositions=o}initializeNounModifier(e){let i=e.fromRange(.05,.2);this.relativeParticle=this.morphology.makeParticles(1,!1)();let s=(0,b.pickMe)([[()=>this.nounPhrase(),1],[()=>this.morphology.noun(),10],[()=>this.adpositionPhrase(),2],[()=>`${this.relativeParticle} ${this.basicClause()}`,1]],this.rng);this.nounModifier=()=>{if(e.maybe(i)){let t=s()(),o=this.nounModifier();return o?`${t} ${o}`:t}else return null}}initializeQuestion(){switch(this.syntax.questionParticlePosition){case"initial":this.question=(...e)=>{let i=this.questionParticle(),s=this.basicClause(...e);return(0,S.capitalize)(i?`${i} ${s}?`:`${s}?`)};case"final":this.question=(...e)=>{let i=this.questionParticle(),s=this.basicClause(...e);return(0,S.capitalize)(i?`${s} ${i}?`:`${s}?`)};default:this.question=(...e)=>(0,S.capitalize)(`${this.basicClause(...e)}?`)}}initializeAdverbials(e){this.adverbial=()=>e.maybe(.1)?this.adpositionPhrase():this.morphology.adverb()}initializeAssertion(e){let i=(this.syntax.verbRequiresSubject?yi:vi)(this.rng),s;switch(this.syntax.basicWordOrder){case"VSO":s=(...t)=>{let o=this.sententialParticlePositions(),n=[];for(;o.initial--;)n.push(this.morphology.particle());for(;o.beforeVerb--;)n.push(this.morphology.particle());for(n.push(this.verbPhrase());o.afterVerb--;)n.push(this.morphology.particle());let r=i();for(;r--;)n.push(this.nounPhrase(t.shift()));for(;o.final--;)n.push(this.morphology.particle());return n.join(" ")};break;case"SVO":s=(...t)=>{let o=this.sententialParticlePositions(),n=[],r=[];for(;o.beforeVerb--;)r.push(this.morphology.particle());for(r.push(this.verbPhrase());o.afterVerb--;)r.push(this.morphology.particle());for(;o.initial--;)n.push(this.morphology.particle());let l=i();for(;l--;)n.push(this.nounPhrase(t.shift()));for(n.length?n.splice(1,0,...r):n.splice(0,0,...r);o.final--;)n.push(this.morphology.particle());return n.join(" ")};break;case"SOV":s=(...t)=>{let o=this.sententialParticlePositions(),n=[];for(;o.initial--;)n.push(this.morphology.particle());let r=i();for(;r--;)n.push(this.nounPhrase(t.shift()));for(;o.beforeVerb--;)n.push(this.morphology.particle());for(n.push(this.verbPhrase());o.afterVerb--;)n.push(this.morphology.particle());for(;o.final--;)n.push(this.morphology.particle());return n.join(" ")};break;case"VOS":s=(...t)=>{let o=this.sententialParticlePositions(),n=[];for(;o.initial--;)n.push(this.morphology.particle());for(;o.beforeVerb--;)n.push(this.morphology.particle());for(n.push(this.verbPhrase());o.afterVerb--;)n.push(this.morphology.particle());let r=[],l=i();for(;l--;)r.push(this.nounPhrase(t.shift()));for(n.push(...r.reverse());o.final--;)n.push(this.morphology.particle());return n.join(" ")};break;case"OVS":s=(...t)=>{let o=this.sententialParticlePositions(),n=[];for(;o.initial--;)n.push(this.morphology.particle());let r=[],l=i();for(;l--;)r.push(this.nounPhrase(t.shift()));r=r.reverse();let h=[];for(;o.beforeVerb--;)h.push(this.morphology.particle());for(h.push(this.verbPhrase());o.afterVerb--;)h.push(this.morphology.particle());for(n.reverse(),r.length?r.splice(1,0,...h):r.push(...h),n.push(...r);o.final--;)n.push(this.morphology.particle());return n.join(" ")};break;case"OSV":s=(...t)=>{let o=this.sententialParticlePositions(),n=[];for(;o.initial--;)n.push(this.morphology.particle());let r=[],l=i();for(;l--;)r.push(this.nounPhrase(t.shift()));for(n.push(...r);o.beforeVerb--;)n.push(this.morphology.particle());for(n.push(this.verbPhrase());o.afterVerb--;)n.push(this.morphology.particle());for(;o.final--;)n.push(this.morphology.particle());return n.join(" ")};break;default:s=(...t)=>{let o=this.sententialParticlePositions(),n=[];for(;o.initial--;)n.push(this.morphology.particle());let r=[];for(;o.beforeVerb--;)r.push(this.morphology.particle());for(r.push(this.verbPhrase());o.afterVerb--;)r.push(this.morphology.particle());let l=[],h=i();for(;h--;)l.push(this.nounPhrase(t.shift()));for(l=(0,S.shuffle)(l,this.rng),l.splice(Math.round(e.fromRange(0,l.length)),0,...r),n.push(...l);o.final--;)n.push(this.morphology.particle());return n.join(" ")}}switch(this.basicClause=s,this.syntax.assertionParticlePosition){case"initial":this.assertion=(...t)=>{let o=this.assertionParticle(),n=this.basicClause(...t);return(0,S.capitalize)(o?`${o} ${n}.`:`${n}.`)};break;case"final":this.assertion=(...t)=>{let o=this.assertionParticle(),n=this.basicClause(...t);return(0,S.capitalize)(o?`${n} ${o}.`:`${n}.`)};break;default:this.assertion=(...t)=>(0,S.capitalize)(`${this.basicClause(...t)}.`)}switch(this.syntax.assertionParticlePosition){case"initial":this.exclamation=(...t)=>{let o=this.assertionParticle(),n=this.basicClause(...t);return(0,S.capitalize)(o?`${o} ${n}!`:`${n}!`)};break;case"final":this.exclamation=(...t)=>{let o=this.assertionParticle(),n=this.basicClause(...t);return(0,S.capitalize)(o?`${n} ${o}!`:`${n}!`)};break;default:this.exclamation=(...t)=>(0,S.capitalize)(`${this.basicClause(...t)}!`)}}initializeAdpositionPhrase(){this.syntax.adpositionPosition==="before"?this.adpositionPhrase=e=>`${this.adposition()} ${e?this.nounPhrase(e):this.stemlessNoun()}`:this.adpositionPhrase=e=>`${e?this.nounPhrase(e):this.stemlessNoun()} ${this.adposition()}`}initializeVerbPhrase(e){var i,s,t,o;(i=(t=this.syntax).verbRequiresSubject)!==null&&i!==void 0||(t.verbRequiresSubject=e.maybe(.5)),(s=(o=this.syntax).usesAuxiliaryVerbs)!==null&&s!==void 0||(o.usesAuxiliaryVerbs=this.morphology.config().analytic?e.maybe(.95):e.maybe(.1));let n;if(this.syntax.usesAuxiliaryVerbs){let l=this.morphology.makeParticles(ci(this.rng)(),!1),h=e.fromRange(.1,.5);n=u=>e.maybe(h)?this.morphology.verb(u):`${this.morphology.verb(l())} ${u??this.morphology.verbStem()}`}else n=l=>this.morphology.verb(l);let r=hi(this.rng);this.syntax.modifierPosition==="before"?this.verbPhrase=l=>{let h=[],u=r();for(;u--;)h.push(this.adverbial());return h.push(n(l)),h.join(" ")}:this.verbPhrase=l=>{let h=[n(l)],u=r();for(;u--;)h.push(this.adverbial());return h.join(" ")}}initializeNounPhrase(e){this.stemlessNoun=()=>e.maybe(.2)?this.morphology.pronoun():this.nounPhrase(),this.syntax.modifierPosition==="before"?this.nounPhrase=i=>{let s=this.morphology.noun(i),t=this.nounModifier();return t?`${t} ${s}`:s}:this.nounPhrase=i=>{let s=this.morphology.noun(i),t=this.nounModifier();return t?`${s} ${t}`:s}}initializeAdpositionPosition(){if(this.adposition=this.morphology.makeParticles(ui(this.rng)(),!1),this.syntax.adpositionPosition!==void 0)return;let e;switch(this.syntax.basicWordOrder){case"SOV":case"OVS":case"OSV":e=pi;break;case"SVO":case"VOS":case"VSO":e=fi;break;default:e=mi}this.syntax.adpositionPosition=e(this.rng)()}initializeModifierPosition(){var e,i;(e=(i=this.syntax).modifierPosition)!==null&&e!==void 0||(i.modifierPosition=di(this.rng)())}initializeQuestionParticlePosition(){if(this.syntax.questionParticlePosition===void 0){switch(this.syntax.assertionParticlePosition){case"initial":this.syntax.questionParticlePosition=bi(this.rng)();break;case"final":this.syntax.questionParticlePosition=ki(this.rng)();break;default:this.syntax.questionParticlePosition=Pi(this.rng)()}if(this.syntax.questionParticlePosition!=="none"){let e=xi(this.rng)();this.questionParticle=this.morphology.makeParticles(e,!0)}}}initializeAssertionParticlePosition(){var e,i;if((e=(i=this.syntax).assertionParticlePosition)!==null&&e!==void 0||(i.assertionParticlePosition=Ci(this.rng)()),this.syntax.assertionParticlePosition!=="none"){let s=Mi(this.rng)();this.assertionParticle=this.morphology.makeParticles(s,!0)}}initializeWordOrder(){var e,i;(e=(i=this.syntax).basicWordOrder)!==null&&e!==void 0||(i.basicWordOrder=gi(this.rng)())}config(){return this.syntax}};D.SyntaxEngine=oe;var ci=(0,b.pickMeToo)([[3,10],[4,40],[5,60],[6,80],[7,95],[8,100],[9,90],[10,50]]),hi=(0,b.pickMeToo)([[0,50],[1,2],[2,1]]),ui=(0,b.pickMeToo)([[6,1],[7,2],[8,4],[9,8],[10,16]]),pi=(0,b.pickMeToo)([["before",1],["after",6]]),fi=(0,b.pickMeToo)([["before",6],["after",1]]),mi=(0,b.pickMeToo)([["before",4],["after",1]]),di=(0,b.pickMeToo)([["before",1],["after",2]]),gi=(0,b.pickMeToo)([["SOV",565],["SVO",488],["VSO",95],["VOS",25],["OVS",11],["OSV",4],["Unfixed",189]]),vi=(0,b.pickMeToo)([[0,12],[1,12],[2,8],[3,1]]),yi=(0,b.pickMeToo)([[1,12],[2,8],[3,1]]),bi=(0,b.pickMeToo)([["initial",10],["final",2],["none",1]]),ki=(0,b.pickMeToo)([["initial",2],["final",10],["none",1]]),Pi=(0,b.pickMeToo)([["initial",3],["final",2],["none",5]]),xi=(0,b.pickMeToo)([[1,4],[2,2],[3,1]]),Mi=(0,b.pickMeToo)([[1,16],[2,8],[3,4],[4,2],[5,1]]),Ci=(0,b.pickMeToo)([["initial",1],["final",10],["none",20]]),wi=(0,b.pickMeToo)([[1,50],[2,10],[3,3],[4,2],[5,1]])});var Se=E(Q=>{"use strict";Object.defineProperty(Q,"__esModule",{value:!0});Q.Language=void 0;var H=F(),_i=be(),Si=Ce(),Vi=we(),_e=B(),ae=class{constructor({seed:e,name:i,phonology:s,morphology:t,syntax:o,rngGenerator:n}={}){this.seed=e??Math.random()*1e3,this.rng=(n??H.rando)(this.seed),this.phonology=new Si.PhonologyEngine(s,this.rng),this.morphology=new _i.MorphologyEngine(this.phonology,t,this.rng),this.syntax=new Vi.SyntaxEngine(this.morphology,o,this.rng),this.name=i??(0,_e.titleize)(this.syntax.nounPhrase()),this.sentenceCount=zi(this.rng),this.sentenceType=qi(this.rng),this.topicCount=Ti(this.rng),this.subtopicCount=Ai(this.rng)}assertion(...e){return this.syntax.assertion(...e)}question(...e){return this.syntax.question(...e)}exclamation(...e){return this.syntax.exclamation(...e)}nounPhrase(e){return this.syntax.nounPhrase(e)}makeTopics(e){let i=[],s=new Set,t=this.topicCount();for(e&&e<t&&(t=e);i.length<t;){let o=this.morphology.nounStem();s.has(o)||(s.add(o),i.push(o))}return i}paragraph(e){e??(e=this.makeTopics(4));let i=2;i>e.length&&(i=e.length);let s=[];for(let l of e)s.push([l,this.rng()]);let t=0;for(let[,l]of s)t+=l;s.push([void 0,t*2]);let o=(0,H.pickMe)(s,this.rng),n=this.sentenceCount(),r=[];for(let l=0;l<n;l++){e=[];for(let h=0;h<i;h++){let u=o();u&&u!==e[0]&&e.push(u)}switch(this.sentenceType()){case"assertion":r.push(this.assertion(...e));break;case"question":r.push(this.question(...e));break;case"exclamation":r.push(this.exclamation(...e));break}}return r.join(" ")}essay(e,i){if(e??(e=Math.round(new _e.Hmm(this.rng).fromRange(3,15))),e<1)throw"an essay must have a positive number of paragraphs";i??(i=this.makeTopics());let s=[];for(let n of i)s.push([n,this.rng()]);let t=(0,H.pickMe)(s,this.rng),o=[];for(let n=0;n<e;n++){let r=[],l=new Set,h=this.subtopicCount();h>i.length&&(h=i.length);for(let u=0;u<h;u++){let m=t();l.has(m)||(l.add(m),r.push(m))}o.push(this.paragraph(r))}return o.join(`

`)}scramble(){this.rng(Math.random())}config(){return{name:this.name,seed:this.seed,phonology:this.phonology.config(),morphology:this.morphology.config(),syntax:this.syntax.config()}}};Q.Language=ae;var zi=(0,H.pickMeToo)([[1,36],[2,60],[3,22],[4,10],[5,4],[6,1],[7,1],[8,1],[9,1],[10,1],[11,1]]),qi=(0,H.pickMeToo)([["assertion",291],["exclamation",4],["question",7]]),Ti=(0,H.pickMeToo)([[1,15],[2,20],[3,35],[4,40],[5,30],[6,20],[7,10],[8,5],[9,3],[10,2],[11,1],[12,1]]),Ai=(0,H.pickMeToo)([[1,1],[2,4],[3,8],[4,10]])});var Ve=E(G=>{"use strict";Object.defineProperty(G,"__esModule",{value:!0});G.Language=void 0;var Oi=Se();Object.defineProperty(G,"Language",{enumerable:!0,get:function(){return Oi.Language}})});var L=Re(Ve());(()=>{let a=(v,z)=>document.getElementById(v).onclick=z,e=1,i,s=new L.Language({seed:e}),t=(v,z)=>{let j=document.getElementById(v);j&&(j.innerHTML=z)},o=()=>t("name",s.name),n=()=>t("assertion",s.assertion()),r=()=>t("question",s.question()),l=()=>t("exclamation",s.exclamation()),h=()=>t("essay",s.essay(i)),u=()=>{o(),n(),r(),l(),h()},m=()=>{let v=document.getElementById("seed");v.value&&(e=Number.parseFloat(v.value),s=new L.Language({seed:e}),u())};u(),a("change-seed",m),a("assertion-again",n),a("question-again",r),a("exclamation-again",l),a("essay-again",h);let p=15,C=0,w=()=>{document.getElementById("seed").value=e.toString(),s=new L.Language({seed:e}),u()},V=v=>{C=C+v,e=C*p+1,w(),R()},O=document.getElementById("language-picker"),R=()=>{for(;O.firstChild;)O.removeChild(O.firstChild);for(let v=0;v<p;v++){let z=e+v,j=new L.Language({seed:z}),N=document.createElement("DIV");N.setAttribute("class","lang"),N.innerHTML=j.name,O.appendChild(N),N.onclick=()=>{e=z,w()}}};R();for(let v of document.getElementsByClassName("left"))v.onclick=()=>V(-1);for(let v of document.getElementsByClassName("right"))v.onclick=()=>V(1)})();})();
